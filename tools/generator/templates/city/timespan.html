{% set stylesheets = [
  "/lib/fullcalendar-3.9.0.min.css",
] -%}

{% set scripts = [
  "/lib/fullcalendar-3.9.0.min.js",
  "/lib/fullcalendar-locale-fr-3.9.0.js",
] -%}

{% extends "city/base.html" %}

{% block city_base_content %}
<div class="row d-lg-none">
  <div class="col">
    <div class="sp-advertisement">
      <p>Publicité</p>
      <p><img class="img-fluid" src="/ads/468x60-banner.png" /></p>
    </div>
  </div>
</div>

<div class="row">
  <div class="col">
    <h1 id="sp-timespan-title">{% if displayed_week %}Semaine du {{ displayed_week.start_date|format_date }}{% elif displayed_three_days %}3 jours à partir du {{ displayed_three_days.start_date|format_date }}{% else %}Journée du {{ displayed_day.date|format_date }}{% endif %}</h1>

    <div class="row"><div class="col"><div id="sp-tag-filtering" class="form-group">
      {% for tag in city.tags %}
      <div class="form-check form-check-inline" style="border-color: {{ tag.border_color }}; background-color: {{ tag.background_color }}">
        <label class="form-check-label"><input class="form-check-input" type="checkbox" value="{{ tag.slug }}" />{{ tag.title }}</label>
      </div>
      {% endfor %}
    </div></div></div>

    <div class="row">
      <div class="col">
        <p class="text-right">&nbsp;<a class="sp-previous-week-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}/{% if displayed_week and displayed_week.previous.start_date >= first_week.start_date %}{{ displayed_week.previous.slug }}{% endif %}/">&lt; Semaine précédente</a></p>
        <p class="text-right">&nbsp;<a class="sp-previous-three-days-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}/{% if displayed_three_days and displayed_three_days.previous.start_date >= first_week.start_date %}{{ displayed_three_days.previous.slug }}{% endif %}/">&lt; Jours précédents</a></p>
        <p class="text-right">&nbsp;<a class="sp-previous-day-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}/{% if displayed_day and displayed_day.previous.date >= first_week.start_date %}{{ displayed_day.previous.slug }}{% endif %}/">&lt; Jour précédent</a></p>
      </div>
      <div class="col">
        <p class="text-center"><a class="sp-now-week-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}//">Cette semaine</a></p>
        <p class="text-center"><a class="sp-now-three-days-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}//">Ces 3 jours</a></p>
        <p class="text-center"><a class="sp-now-day-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}//">Aujourd'hui</a></p>
      </div>
      <div class="col">
        <p class="text-left"><a class="sp-next-week-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}/{% if displayed_week and displayed_week.date_after < week_after.start_date %}{{ displayed_week.next.slug }}{% endif %}/">Semaine suivante &gt;</a>&nbsp;</p>
        <p class="text-left"><a class="sp-next-three-days-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}/{% if displayed_three_days and displayed_three_days.date_after < week_after.start_date %}{{ displayed_three_days.next.slug }}{% endif %}/">Jours suivants &gt;</a>&nbsp;</p>
        <p class="text-left"><a class="sp-next-day-link sp-tag-filtering-tagged-link" href="/{{ city.slug }}/{% if displayed_day and displayed_day.date_after < week_after.start_date %}{{ displayed_day.next.slug }}{% endif %}/">Jour suivant &gt;</a>&nbsp;</p>
      </div>
    </div>

    <div id="sp-fullcalendar"></div>
  </div>

  <div class="col-lg-3 col-xl-2 d-none d-lg-inline-block">
    <div class="sp-advertisement">
      <p>Publicité</p>
      <p><img class="img-fluid" src="/ads/160x600-wide-skyscraper.png" /></p>
    </div>
  </div>
</div>
{% endblock %}

{% block city_base_splight_parameters %}
  {% if displayed_week %}
            displayed_week: {
              start_date: moment("{{ displayed_week.start_date }}"),
            },
  {% elif displayed_three_days %}
            displayed_three_days: {
              start_date: moment("{{ displayed_three_days.start_date }}"),
            },
  {% else %}
            displayed_day: {
              date: moment("{{ displayed_day.date }}"),
            },
  {% endif %}
{% endblock %}
