type Query {
  generation: Generation
  artists(name: String, max: Int): [Artist!]
  artist(slug: ID!): Artist!
  cities: [City!]!
  city(slug: ID!): City!
}

scalar Date
scalar Time
scalar DateTime

scalar URL

type Generation {
  date: Date!
  dateAfter: Date!
}

type Artist {
  slug: ID!
  name: String!
  description: [String!]!
  website: URL
}

type City {
  slug: ID!
  name: String!
  tags: [Tag!]!
  locations(name: String, max: Int): [Location!]
  location(slug: ID!): Location!
  event(id: ID!): Event!
  events(tag: ID, location: ID, artist: ID, title: String, dates: IDateInterval, max: Int): [Event!]
  firstDate: Date
  dateAfter: Date
}

type Tag {
  slug: ID!
  title: String!
}

type Location {
  slug: ID!
  name: String!
  description: [String!]!
  website: URL
}

type Event {
  id: ID!
  title: String
  artist: Artist
  location: Location!
  tags: [Tag!]!
  occurrences: [Occurrence!]!
}

type Occurrence {
  start: DateTime!
}


type Mutation {
  putArtist(artist: IArtist!): Artist!
  putLocation(citySlug: ID!, location: ILocation!): Location!
  putEvent(citySlug: ID!, event: IEvent!): Event!
  deleteEvent(citySlug: ID!, eventId: ID!): Event!
}

input IArtist {
  slug: ID!
  name: String!
  description: [String!]!
  website: URL
}

input ILocation {
  slug: ID!
  name: String!
  description: [String!]!
  website: URL
}

input IEvent {
  id: ID
  title: String
  artist: ID
  location: ID!
  tags: [ID!]!
  occurrences: [IOccurrence!]!
}

input IOccurrence {
  start: DateTime!
}

input IDateInterval {
  start: Date!
  after: Date!
}
